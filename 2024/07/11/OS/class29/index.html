<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>29. æŒä¹…æ•°æ®çš„å¯é æ€§ | Asuka's Blog</title><meta name="author" content="Asuka"><meta name="copyright" content="Asuka"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å®ç°å¯é çš„ç£ç›˜ æŒä¹…æ•°æ®çš„ â€œæŒä¹…â€  å¦‚æœæˆ‘ä»¬çš„æ•°æ® â€œå°±åœ°æ¶ˆå¤±â€   é€šè®¯è½¯ä»¶æ— æ³•ä½¿ç”¨ æ”¯ä»˜è½¯ä»¶æ— æ³•ä½¿ç”¨  æ²¡æœ‰ â€œä¸€ä¸ªâ€ ç»å¯¹å¯é çš„å­˜å‚¨è®¾å¤‡  ä¸´æ—¶å¤±æ•ˆ   Kernel panic (bug); æ–­ç”µ   éƒ¨åˆ†å¤±æ•ˆ   ECC çº é”™å¤±è´¥; fail slow   æ°¸ä¹…å¤±æ•ˆ   å°æ¦‚ç‡äº‹ä»¶ï¼šç¡¬ç›˜ç‰©ç†æŸå (å¤§é‡é‡å¤ &#x3D; å¿…ç„¶å‘ç”Ÿ) æå°æ¦‚ç‡äº‹ä»¶ï¼šæˆ˜äº‰çˆ†å‘&#x2F;ä¸‰ä½“äººè¿›æ”»åœ°çƒ&#x2F;ä¸–ç•Œæ¯ç­  RAID">
<meta property="og:type" content="article">
<meta property="og:title" content="29. æŒä¹…æ•°æ®çš„å¯é æ€§">
<meta property="og:url" content="https://www.asukas.cc/2024/07/11/OS/class29/index.html">
<meta property="og:site_name" content="Asuka&#39;s Blog">
<meta property="og:description" content="å®ç°å¯é çš„ç£ç›˜ æŒä¹…æ•°æ®çš„ â€œæŒä¹…â€  å¦‚æœæˆ‘ä»¬çš„æ•°æ® â€œå°±åœ°æ¶ˆå¤±â€   é€šè®¯è½¯ä»¶æ— æ³•ä½¿ç”¨ æ”¯ä»˜è½¯ä»¶æ— æ³•ä½¿ç”¨  æ²¡æœ‰ â€œä¸€ä¸ªâ€ ç»å¯¹å¯é çš„å­˜å‚¨è®¾å¤‡  ä¸´æ—¶å¤±æ•ˆ   Kernel panic (bug); æ–­ç”µ   éƒ¨åˆ†å¤±æ•ˆ   ECC çº é”™å¤±è´¥; fail slow   æ°¸ä¹…å¤±æ•ˆ   å°æ¦‚ç‡äº‹ä»¶ï¼šç¡¬ç›˜ç‰©ç†æŸå (å¤§é‡é‡å¤ &#x3D; å¿…ç„¶å‘ç”Ÿ) æå°æ¦‚ç‡äº‹ä»¶ï¼šæˆ˜äº‰çˆ†å‘&#x2F;ä¸‰ä½“äººè¿›æ”»åœ°çƒ&#x2F;ä¸–ç•Œæ¯ç­  RAID">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn-img-el3.pages.dev/img/avatar.png">
<meta property="article:published_time" content="2024-07-10T16:00:00.000Z">
<meta property="article:modified_time" content="2024-07-11T12:13:01.502Z">
<meta property="article:author" content="Asuka">
<meta property="article:tag" content="æ“ä½œç³»ç»Ÿ-æŒä¹…åŒ–">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn-img-el3.pages.dev/img/avatar.png"><link rel="shortcut icon" href="https://cdn-img-el3.pages.dev/img/favicon.png"><link rel="canonical" href="https://www.asukas.cc/2024/07/11/OS/class29/index.html"><link rel="preconnect" href="//unpkg.com"/><meta name="baidu-site-verification" content="codeva-n7rApaTK69"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":50,"languages":{"author":"ä½œè€…: Asuka","link":"é“¾æ¥: ","source":"æ¥æº: Asuka's Blog","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://unpkg.com/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '29. æŒä¹…æ•°æ®çš„å¯é æ€§',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-11 20:13:01'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">åŠ è½½ä¸­...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn-img-el3.pages.dev/img/avatar.png" onerror="onerror=null;src='https://cdn-img-el3.pages.dev/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn-img-el3.pages.dev/cover/bg.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="Asuka's Blog"><span class="site-name">Asuka's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">29. æŒä¹…æ•°æ®çš„å¯é æ€§</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-07-10T16:00:00.000Z" title="å‘è¡¨äº 2024-07-11 00:00:00">2024-07-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-07-11T12:13:01.502Z" title="æ›´æ–°äº 2024-07-11 20:13:01">2024-07-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">æ“ä½œç³»ç»Ÿ</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">1.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>5åˆ†é’Ÿ</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="å®ç°å¯é çš„ç£ç›˜">å®ç°å¯é çš„ç£ç›˜</h2>
<h3 id="æŒä¹…æ•°æ®çš„-â€œæŒä¹…â€">æŒä¹…æ•°æ®çš„ â€œæŒä¹…â€</h3>
<blockquote>
<p>å¦‚æœæˆ‘ä»¬çš„æ•°æ® â€œå°±åœ°æ¶ˆå¤±â€</p>
</blockquote>
<ul>
<li>é€šè®¯è½¯ä»¶æ— æ³•ä½¿ç”¨</li>
<li>æ”¯ä»˜è½¯ä»¶æ— æ³•ä½¿ç”¨</li>
</ul>
<h3 id="æ²¡æœ‰-â€œä¸€ä¸ªâ€-ç»å¯¹å¯é çš„å­˜å‚¨è®¾å¤‡">æ²¡æœ‰ â€œä¸€ä¸ªâ€ ç»å¯¹å¯é çš„å­˜å‚¨è®¾å¤‡</h3>
<blockquote>
<p>ä¸´æ—¶å¤±æ•ˆ</p>
</blockquote>
<ul>
<li>Kernel panic (bug); æ–­ç”µ</li>
</ul>
<blockquote>
<p>éƒ¨åˆ†å¤±æ•ˆ</p>
</blockquote>
<ul>
<li>ECC çº é”™å¤±è´¥; fail slow</li>
</ul>
<blockquote>
<p>æ°¸ä¹…å¤±æ•ˆ</p>
</blockquote>
<ul>
<li>å°æ¦‚ç‡äº‹ä»¶ï¼šç¡¬ç›˜ç‰©ç†æŸå (å¤§é‡é‡å¤ = å¿…ç„¶å‘ç”Ÿ)</li>
<li>æå°æ¦‚ç‡äº‹ä»¶ï¼šæˆ˜äº‰çˆ†å‘/ä¸‰ä½“äººè¿›æ”»åœ°çƒ/ä¸–ç•Œæ¯ç­</li>
</ul>
<h3 id="RAID-å­˜å‚¨è®¾å¤‡çš„è™šæ‹ŸåŒ–">RAID: å­˜å‚¨è®¾å¤‡çš„è™šæ‹ŸåŒ–</h3>
<blockquote>
<p>æ€§èƒ½å’Œå¯é æ€§ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½å…¨éƒ½è¦å‘¢ï¼Ÿ</p>
</blockquote>
<ul>
<li>Redundant Array of Inexpensive (Independent) Disks (RAID)</li>
<li>æŠŠå¤šä¸ª (ä¸å¯é çš„) ç£ç›˜è™šæ‹Ÿæˆä¸€å—éå¸¸å¯é ä¸”æ€§èƒ½æé«˜çš„è™šæ‹Ÿç£ç›˜
<ul>
<li><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.1145/971701.50214">A case for redundant arrays of inexpensive disks (RAID)</a>(SIGMODâ€™88)</li>
</ul>
</li>
</ul>
<blockquote>
<p>ä¸€ä¸ª â€œåå‘â€ çš„è™šæ‹ŸåŒ–</p>
</blockquote>
<ul>
<li>ç±»æ¯”ï¼šè¿›ç¨‹/è™šå­˜/æ–‡ä»¶æŠŠ â€œä¸€ä¸ªè®¾å¤‡â€ è™šæ‹Ÿæˆå¤šä»½</li>
</ul>
<h3 id="RAID-Design-Space">RAID: Design Space</h3>
<blockquote>
<p>RAID (è™šæ‹ŸåŒ–) = è™šæ‹Ÿå—å·åˆ° (ç£ç›˜, å—å·) çš„ â€œæ˜ å°„â€</p>
</blockquote>
<ul>
<li>è™šæ‹Ÿç£ç›˜å—å¯ä»¥å­˜å‚¨åœ¨ä»»ä½•ç‰©ç†ç£ç›˜ä¸Š
<ul>
<li>ç‰©ç†ç£ç›˜è¯»å†™å¯ä»¥å¹¶è¡Œï¼›å­˜å‚¨<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">&gt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ä»½å³å¯å®ç°å®¹é”™</li>
</ul>
</li>
</ul>
<blockquote>
<p>RAID-0ï¼šæ›´å¤§çš„å®¹é‡ã€æ›´å¿«çš„é€Ÿåº¦</p>
</blockquote>
<ul>
<li>è¯»é€Ÿåº¦ x 2ï¼›å†™é€Ÿåº¦ x 2</li>
<li>Quiz: äº¤é”™æ’åˆ—è¿˜æ˜¯ä¸€åˆ†ä¸ºäºŒ?</li>
</ul>
<blockquote>
<p>RAID-1ï¼šé•œåƒ (å®¹é”™)</p>
</blockquote>
<ul>
<li>ä¿æŒä¸¤å—ç›˜å®Œå…¨ä¸€æ ·</li>
<li>è¯»é€Ÿåº¦ x 2ï¼›å†™é€Ÿåº¦ä¿æŒä¸€è‡´</li>
</ul>
<h3 id="å®¹é”™çš„ä»£ä»·">å®¹é”™çš„ä»£ä»·</h3>
<blockquote>
<p>æµªè´¹äº†ä¸€å—ç›˜çš„å®¹é‡â€¦â€¦</p>
</blockquote>
<ul>
<li>å¦‚æœæˆ‘ä»¬æœ‰ 100 å—ç›˜</li>
<li>ä½†å‡è®¾ä¸ä¼šæœ‰ä¸¤å—ç›˜åŒæ—¶ fail-stopï¼Ÿ</li>
</ul>
<blockquote>
<p>èƒ½ä¸èƒ½åªç”¨ 1-bit çš„å†—ä½™ï¼Œæ¢å¤å‡ºä¸€ä¸ªä¸¢å¤±çš„ bitï¼Ÿ</p>
</blockquote>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mi>a</mi><mo>âŠ•</mo><mi>b</mi><mo>âŠ•</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">x=aâŠ•bâŠ•c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mi>x</mi><mo>âŠ•</mo><mi>b</mi><mo>âŠ•</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">a=xâŠ•bâŠ•c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>=</mo><mi>a</mi><mo>âŠ•</mo><mi>x</mi><mo>âŠ•</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">b=aâŠ•xâŠ•c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>=</mo><mi>a</mi><mo>âŠ•</mo><mi>b</mi><mo>âŠ•</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">c=aâŠ•bâŠ•x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></li>
</ul>
</li>
<li>100 å—ç›˜é‡Œï¼Œ99 å—ç›˜éƒ½æ˜¯æ•°æ®ï¼
<ul>
<li>Caveat: random write æ€§èƒ½</li>
</ul>
</li>
</ul>
<h3 id="RAID-5-Rotating-Parity">RAID-5: Rotating Parity</h3>
<blockquote>
<p>ä½¿ Parity å‡åŒ€åˆ†å¸ƒåœ¨å„ä¸ªç£ç›˜</p>
</blockquote>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-1-1.webp" alt="c29-1-1.webp"></p>
<h3 id="RAID-è®¨è®º">RAID: è®¨è®º</h3>
<blockquote>
<p>æ›´å¿«ã€æ›´å¯é ã€è¿‘ä¹å…è´¹çš„å¤§å®¹é‡ç£ç›˜</p>
</blockquote>
<ul>
<li>ä»æ­¤å†æ—  â€œé«˜å¯é æ€§ç£ç›˜â€
<ul>
<li>ç°åœ¨æˆ‘ä»¬åªéœ€è¦RAID</li>
</ul>
</li>
</ul>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-1-2.webp" alt="c29-1-2.webp"></p>
<h3 id="RAID-è‡ªèº«çš„å¯é æ€§">RAID: è‡ªèº«çš„å¯é æ€§</h3>
<blockquote>
<p>ç£ç›˜ Fail-stop</p>
</blockquote>
<ul>
<li>è½¯ä»¶å¯ä»¥æ„ŸçŸ¥</li>
<li>è‡ªåŠ¨å¯ç”¨å¤‡ç›˜å¹¶å¤åˆ¶æ•°æ®
<ul>
<li>æœŸé—´æ€§èƒ½ä¸‹é™</li>
</ul>
</li>
</ul>
<blockquote>
<p>RAID ç‰©ç†ç£ç›˜ä¸èƒ½å®Œç¾åŒæ­¥</p>
</blockquote>
<ul>
<li>æ–­ç”µ â†’ æ•°æ®ä¸ä¸€è‡´</li>
<li>å¦‚ä½•è§£å†³ï¼Ÿ</li>
</ul>
<h3 id="è®¡ç®—æœºç³»ç»Ÿçš„åˆä¸€ä¸ªé»„é‡‘æ—¶ä»£">è®¡ç®—æœºç³»ç»Ÿçš„åˆä¸€ä¸ªé»„é‡‘æ—¶ä»£</h3>
<blockquote>
<p>â€œä¸‰é©¾é©¬è½¦â€ å¼€å¯ â€œå¤§æ•°æ®â€ æ—¶ä»£</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.1145/1165389.945450">GFS (Google file system)</a> (SOSPâ€™03), <a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.5555/1251254.1251264">MapReduce</a> (OSDIâ€™04), <a target="_blank" rel="noopener" href="https://www.usenix.org/legacy/event/osdi06/tech/chang/chang.pdf">BigTable</a> (OSDIâ€™06)</li>
</ul>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-1-3.webp" alt="c29-1-3.webp"></p>
<center>è¿™æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„RAID</center>
<h3 id="æ•°æ®ä¸­å¿ƒå­˜å‚¨ï¼šä¸€ä¸ª-â€œåˆ†å¸ƒå¼çš„-RAIDâ€">æ•°æ®ä¸­å¿ƒå­˜å‚¨ï¼šä¸€ä¸ª â€œåˆ†å¸ƒå¼çš„ RAIDâ€</h3>
<blockquote>
<p>Everything is Virtual</p>
</blockquote>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-1-4.webp" alt="c29-1-4.webp"></p>
<ul>
<li>é˜¿é‡Œäº‘ Elastic Block Storage (<a target="_blank" rel="noopener" href="https://www.usenix.org/system/files/fast24-zhang-weidong.pdf">EBS</a>, FASTâ€™24 ğŸ…)
<ul>
<li>ç°åœ¨ç†è§£ä¸ºä»€ä¹ˆäº‘å‚å•†èƒ½èººç€æŒ£ ğŸ’° äº†</li>
<li>ç®—ä¸Š 3X replicaï¼Œamplification è¿˜<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">&lt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></li>
</ul>
</li>
</ul>
<h3 id="æ•°æ®ä¸­å¿ƒå­˜å‚¨çš„æŒ‘æˆ˜">æ•°æ®ä¸­å¿ƒå­˜å‚¨çš„æŒ‘æˆ˜</h3>
<blockquote>
<p>Data corruption</p>
</blockquote>
<ul>
<li>ç£ç›˜çœ‹èµ·æ¥æ­£å¸¸ï¼Œä½†ä¸€<a target="_blank" rel="noopener" href="https://www.usenix.org/conference/fast-08/analysis-data-corruption-storage-stack">éƒ¨åˆ†æ•°æ®åäº†</a></li>
</ul>
<blockquote>
<p>Fail-slow</p>
</blockquote>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-1-5.webp" alt="c29-1-5.webp"></p>
<ul>
<li>Firmware bug; device error; wear-out; configuration; environment; â€¦ ç£ç›˜ä¸Šçš„ â€œ<a target="_blank" rel="noopener" href="https://www.usenix.org/system/files/login/articles/login_summer18_06_gunawi.pdf">æ€§èƒ½é—®é¢˜</a>â€</li>
</ul>
<h2 id="å®ç°å¯é çš„æ–‡ä»¶ç³»ç»Ÿ">å®ç°å¯é çš„æ–‡ä»¶ç³»ç»Ÿ</h2>
<h3 id="å´©æºƒä¸€è‡´æ€§-Crash-Consistency">å´©æºƒä¸€è‡´æ€§ (Crash Consistency)</h3>
<blockquote>
<p>Crash Consistency: Move the file system from one consistent state (e.g., before the file got appended to) to another atomically (e.g., after the inode, bitmap, and new data block have been written to disk).</p>
</blockquote>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-2-1.webp" alt="c29-2-1.webp"></p>
<p>(ä½ ä»¬å¹³æ—¶ç¼–ç¨‹æ—¶å‡è®¾ä¸ä¼šå‘ç”Ÿçš„äº‹ï¼Œæ“ä½œç³»ç»Ÿéƒ½è¦ç»™ä½ å…œåº•)</p>
<h3 id="Recap-æ–‡ä»¶ç³»ç»Ÿçš„å®ç°">Recap: æ–‡ä»¶ç³»ç»Ÿçš„å®ç°</h3>
<blockquote>
<p>ç£ç›˜ä¸Šçš„æ•°æ®ç»“æ„</p>
</blockquote>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-2-2.webp" alt="c29-2-2.webp"></p>
<ul>
<li>ä¸ºååé‡ä¼˜åŒ–
<ul>
<li>é…åˆ â€œæŒ‰å—è¯»å†™â€ï¼Œè€Œä¸æ˜¯ â€œRandom Accessâ€</li>
</ul>
</li>
<li>æ•°æ®ç»“æ„æ›´å…³æ³¨å±€éƒ¨æ€§
<ul>
<li>ä¸´è¿‘çš„ä¿¡æ¯ç´§å‡‘åœ°æ’åˆ—åœ¨ä¸€èµ·</li>
</ul>
</li>
</ul>
<h3 id="å®ç°å´©æºƒä¸€è‡´æ€§">å®ç°å´©æºƒä¸€è‡´æ€§</h3>
<blockquote>
<p>ç£ç›˜ï¼šæä¾›çš„æ¥å£</p>
</blockquote>
<ul>
<li>bwrite</li>
<li>bread
<ul>
<li>å¹¶ä¸æä¾›å¤šå—è¯»å†™ â€œall or nothingâ€ çš„æ”¯æŒ</li>
<li>ç”šè‡³ä¸ºäº†æ€§èƒ½ï¼Œæ²¡æœ‰é¡ºåºä¿è¯
<ul>
<li>bwrite å¯èƒ½è¢«ä¹±åº</li>
</ul>
</li>
</ul>
</li>
<li>bflush ç­‰å¾…å·²å†™å…¥çš„æ•°æ®è½ç›˜
<ul>
<li>å³ä¾¿æ˜¯ vSSDï¼Œä¹Ÿæ²¡æœ‰å®ç° crash consistency</li>
</ul>
</li>
</ul>
<h3 id="File-System-Checking-FSCK">File System Checking (FSCK)</h3>
<blockquote>
<p>æ ¹æ®ç£ç›˜ä¸Šå·²æœ‰çš„ä¿¡æ¯ï¼Œæ¢å¤å‡º â€œæœ€å¯èƒ½â€ çš„æ•°æ®ç»“æ„</p>
</blockquote>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-2-3.webp" alt="c29-2-3.webp"></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.5555/1855741.1855751">SQCK: A declarative file system checker</a> (OSDIâ€™08)</li>
<li><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.1145/3281031">ç„¶è€Œ</a> (FASTâ€™18): â€œwidely used file systems (EXT4, XFS, BtrFS, and F2FS) may leave the file system in an uncorrectable state if the repair procedure is interrupted unexpectedlyâ€</li>
</ul>
<h3 id="å®ç°å´©æºƒä¸€è‡´æ€§-2">å®ç°å´©æºƒä¸€è‡´æ€§</h3>
<blockquote>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´å¯é çš„æ–¹æ³•</p>
</blockquote>
<ul>
<li>åªè¦ç£ç›˜ä¸åï¼Œæ–­ç”µå°±ä¸ä¼šæœ‰æ•°æ®æŸå</li>
</ul>
<blockquote>
<p>éš¾å®ç°çš„æ ¹æœ¬åŸå› </p>
</blockquote>
<ul>
<li>å­˜å‚¨è®¾å¤‡ä¸æä¾›å¤šæ¬¡å†™å…¥çš„åŸå­æ€§
<ul>
<li>bwrite(inode)</li>
<li>bwrite(d-bitmap)</li>
<li>bwrite(data)</li>
</ul>
</li>
</ul>
<h3 id="é‡æ–°ç†è§£-â€œæ•°æ®ç»“æ„â€">é‡æ–°ç†è§£ â€œæ•°æ®ç»“æ„â€</h3>
<blockquote>
<p>è§†è§’ 1: å­˜å‚¨å®é™…æ•°æ®ç»“æ„ (é“¾è¡¨ã€äºŒå‰æ ‘ã€â€¦â€¦)</p>
</blockquote>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿçš„ â€œç›´è§‚â€ è¡¨ç¤º</li>
<li>crash unsafe</li>
</ul>
<blockquote>
<p>è§†è§’ 2: Append-only è®°å½•æ‰€æœ‰å†å²æ“ä½œ</p>
</blockquote>
<ul>
<li>â€œé‡åšâ€ æ‰€æœ‰æ“ä½œå¾—åˆ°æ•°æ®ç»“æ„çš„å½“å‰çŠ¶æ€</li>
<li>å®¹æ˜“å®ç°å´©æºƒä¸€è‡´æ€§</li>
</ul>
<blockquote>
<p>Jouraling = 1 + 2</p>
</blockquote>
<ul>
<li>å…ˆç”¨ append-only è®°å½•æ—¥å¿—ï¼Œç­‰å¾…è½ç›˜ï¼Œå†æ›´æ–°æ•°æ®ç»“æ„</li>
</ul>
<h3 id="å®ç°-Atomic-Append">å®ç° Atomic Append</h3>
<blockquote>
<p>ç”¨ bread, bwrite å’Œ bflush å®ç° append()</p>
</blockquote>
<p><img src="https://cdn-img-el3.pages.dev/os/c29-2-4.webp" alt="c29-2-4.webp"></p>
<ol>
<li>å®šä½åˆ° journal çš„æœ«å°¾ (bread)</li>
<li>bwrite TXBegin å’Œæ‰€æœ‰æ•°æ®ç»“æ„æ“ä½œ</li>
<li>bflush ç­‰å¾…æ•°æ®è½ç›˜</li>
<li>bwrite TXEnd</li>
<li>bflush ç­‰å¾…æ•°æ®è½ç›˜</li>
<li>å°†æ•°æ®ç»“æ„æ“ä½œå†™å…¥å®é™…æ•°æ®ç»“æ„åŒºåŸŸ</li>
<li>ç­‰å¾…æ•°æ®è½ç›˜åï¼Œåˆ é™¤ (æ ‡è®°) æ—¥å¿—</li>
</ol>
<h3 id="Journaling-ä¼˜åŒ–">Journaling: ä¼˜åŒ–</h3>
<blockquote>
<p>ç°åœ¨ç£ç›˜éœ€è¦å†™å…¥åŒä»½çš„æ•°æ®</p>
</blockquote>
<ul>
<li>æ‰¹å¤„ç† (xv6; jbd)
<ul>
<li>å¤šæ¬¡ç³»ç»Ÿè°ƒç”¨çš„ Tx åˆå¹¶æˆä¸€ä¸ªï¼Œå‡å°‘ log çš„å¤§å°</li>
<li>jbd: å®šæœŸ write back</li>
</ul>
</li>
<li>Checksum (ext4)
<ul>
<li>ä¸å†æ ‡è®° TxBegin/TxEnd</li>
<li>ç›´æ¥æ ‡è®° Tx çš„é•¿åº¦å’Œ checksum</li>
</ul>
</li>
<li>Metadata journaling (ext4 default)
<ul>
<li>æ•°æ®å ç£ç›˜å†™å…¥çš„ç»å¤§éƒ¨åˆ†
<ul>
<li>åªå¯¹ inode å’Œ bitmap åš journaling å¯ä»¥æé«˜æ€§èƒ½</li>
</ul>
</li>
<li>ä¿è¯æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„æ˜¯ä¸€è‡´çš„ï¼›ä½†æ•°æ®å¯èƒ½ä¸¢å¤±</li>
</ul>
</li>
</ul>
<h3 id="Metadata-Journaling">Metadata Journaling</h3>
<blockquote>
<p>ä»åº”ç”¨è§†è§’æ¥çœ‹ï¼Œæ–‡ä»¶ç³»ç»Ÿçš„è¡Œä¸ºå¯èƒ½å¾ˆæ€ªå¼‚</p>
</blockquote>
<ul>
<li>å„ç±»ç³»ç»Ÿè½¯ä»¶ (git, sqlite, gdbm, â€¦) ä¸å¹¸ä¸­æ‹›
<ul>
<li>A<a target="_blank" rel="noopener" href="https://www.bing.com/search?q=All+file+systems+are+not+created+equal%3A+On+the+complexity+of+crafting+crash-consistent+applications&amp;form=APMCS1&amp;PC=APMC&amp;mkt=zh-CN">ll file systems are not created equal: On the complexity of crafting crash-consistent applications</a> (OSDIâ€™14)</li>
<li>(os-workbench é‡Œçš„å°ç§˜å¯†)</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25188921">æ›´å¤šçš„åº”ç”¨ç¨‹åºå¯èƒ½å‘ç”Ÿ data loss</a>
<ul>
<li>æˆ‘ä»¬çš„å·¥ä½œ: GNU coreutils, gmake, gzip, â€¦ ä¹Ÿæœ‰é—®é¢˜</li>
<li><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.1145/2950290.2950327">Crash consistency validation made easy</a> (FSEâ€™16)</li>
</ul>
</li>
</ul>
<blockquote>
<p>æ›´ä¸ºä¸€åŠ³æ°¸é€¸çš„æ–¹æ¡ˆï¼š<a target="_blank" rel="noopener" href="https://dl.acm.org/doi/10.1145/1629575.1629591">TxOS</a></p>
</blockquote>
<ul>
<li>xbegin/xend/xabort ç³»ç»Ÿè°ƒç”¨å®ç°è·¨ syscall çš„  â€œall-or-nothingâ€
<ul>
<li>åº”ç”¨åœºæ™¯ï¼šæ•°æ®æ›´æ–°ã€è½¯ä»¶æ›´æ–°ã€check-useâ€¦â€¦</li>
</ul>
</li>
</ul>
<p><em>å­˜å‚¨ç³»ç»Ÿæ”¯æ’‘äº†å½“ä»Šçš„äº’è”ç½‘å·¥ä¸šâ€”â€”æ¯ä¸ª SSD éƒ½æ˜¯ â€œå¥—å¨ƒâ€ çš„è®¡ç®—æœºç³»ç»Ÿï¼›å®ƒä»¬åˆç»„æˆäº†å¤§è§„æ¨¡å­˜å‚¨ç½‘ç»œï¼Œæ„æˆäº†æˆ‘ä»¬ä»Šå¤©çš„æ•°å­—ä¸–ç•Œã€‚å®ç°ä½æˆæœ¬ã€é«˜æ€§èƒ½ã€é«˜å¯é çš„å­˜å‚¨å¹¶ä¸æ˜¯ä¸€ä¸ªååˆ†ç®€å•çš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯è®¡ç®—æœºäº§ä¸šè®©æˆ‘ä»¬æ„Ÿåˆ°æ¿€åŠ¨çš„åŸå› ã€‚</em></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://www.asukas.cc">Asuka</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://www.asukas.cc/2024/07/11/OS/class29/">https://www.asukas.cc/2024/07/11/OS/class29/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://www.asukas.cc" target="_blank">Asuka's Blog</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E6%8C%81%E4%B9%85%E5%8C%96/">æ“ä½œç³»ç»Ÿ-æŒä¹…åŒ–</a></div><div class="post_share"><div class="social-share" data-image="https://cdn-img-el3.pages.dev/img/avatar.png" data-sites="weibo,wechat,qq,twitter"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://unpkg.com/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2024/07/10/OS/class28/" title="28. æ–‡ä»¶ç³»ç»Ÿ"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-10</div><div class="title">28. æ–‡ä»¶ç³»ç»Ÿ</div></div></a></div><div><a href="/2024/07/03/OS/class25/" title="25.1-Bit çš„å­˜å‚¨"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-03</div><div class="title">25.1-Bit çš„å­˜å‚¨</div></div></a></div><div><a href="/2024/07/08/OS/class26/" title="26. è¾“å…¥è¾“å‡ºè®¾å¤‡"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-08</div><div class="title">26. è¾“å…¥è¾“å‡ºè®¾å¤‡</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn-img-el3.pages.dev/img/avatar.png" onerror="this.onerror=null;this.src='https://cdn-img-el3.pages.dev/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Asuka</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/blukio" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:bulukionico@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E7%9A%84%E7%A3%81%E7%9B%98"><span class="toc-number">1.</span> <span class="toc-text">å®ç°å¯é çš„ç£ç›˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E6%95%B0%E6%8D%AE%E7%9A%84-%E2%80%9C%E6%8C%81%E4%B9%85%E2%80%9D"><span class="toc-number">1.1.</span> <span class="toc-text">æŒä¹…æ•°æ®çš„ â€œæŒä¹…â€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B2%A1%E6%9C%89-%E2%80%9C%E4%B8%80%E4%B8%AA%E2%80%9D-%E7%BB%9D%E5%AF%B9%E5%8F%AF%E9%9D%A0%E7%9A%84%E5%AD%98%E5%82%A8%E8%AE%BE%E5%A4%87"><span class="toc-number">1.2.</span> <span class="toc-text">æ²¡æœ‰ â€œä¸€ä¸ªâ€ ç»å¯¹å¯é çš„å­˜å‚¨è®¾å¤‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID-%E5%AD%98%E5%82%A8%E8%AE%BE%E5%A4%87%E7%9A%84%E8%99%9A%E6%8B%9F%E5%8C%96"><span class="toc-number">1.3.</span> <span class="toc-text">RAID: å­˜å‚¨è®¾å¤‡çš„è™šæ‹ŸåŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID-Design-Space"><span class="toc-number">1.4.</span> <span class="toc-text">RAID: Design Space</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E9%94%99%E7%9A%84%E4%BB%A3%E4%BB%B7"><span class="toc-number">1.5.</span> <span class="toc-text">å®¹é”™çš„ä»£ä»·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID-5-Rotating-Parity"><span class="toc-number">1.6.</span> <span class="toc-text">RAID-5: Rotating Parity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID-%E8%AE%A8%E8%AE%BA"><span class="toc-number">1.7.</span> <span class="toc-text">RAID: è®¨è®º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RAID-%E8%87%AA%E8%BA%AB%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="toc-number">1.8.</span> <span class="toc-text">RAID: è‡ªèº«çš„å¯é æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%88%E4%B8%80%E4%B8%AA%E9%BB%84%E9%87%91%E6%97%B6%E4%BB%A3"><span class="toc-number">1.9.</span> <span class="toc-text">è®¡ç®—æœºç³»ç»Ÿçš„åˆä¸€ä¸ªé»„é‡‘æ—¶ä»£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E5%AD%98%E5%82%A8%EF%BC%9A%E4%B8%80%E4%B8%AA-%E2%80%9C%E5%88%86%E5%B8%83%E5%BC%8F%E7%9A%84-RAID%E2%80%9D"><span class="toc-number">1.10.</span> <span class="toc-text">æ•°æ®ä¸­å¿ƒå­˜å‚¨ï¼šä¸€ä¸ª â€œåˆ†å¸ƒå¼çš„ RAIDâ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%E5%AD%98%E5%82%A8%E7%9A%84%E6%8C%91%E6%88%98"><span class="toc-number">1.11.</span> <span class="toc-text">æ•°æ®ä¸­å¿ƒå­˜å‚¨çš„æŒ‘æˆ˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%9D%A0%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.</span> <span class="toc-text">å®ç°å¯é çš„æ–‡ä»¶ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B4%A9%E6%BA%83%E4%B8%80%E8%87%B4%E6%80%A7-Crash-Consistency"><span class="toc-number">2.1.</span> <span class="toc-text">å´©æºƒä¸€è‡´æ€§ (Crash Consistency)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Recap-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.2.</span> <span class="toc-text">Recap: æ–‡ä»¶ç³»ç»Ÿçš„å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%B4%A9%E6%BA%83%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">2.3.</span> <span class="toc-text">å®ç°å´©æºƒä¸€è‡´æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#File-System-Checking-FSCK"><span class="toc-number">2.4.</span> <span class="toc-text">File System Checking (FSCK)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%B4%A9%E6%BA%83%E4%B8%80%E8%87%B4%E6%80%A7-2"><span class="toc-number">2.5.</span> <span class="toc-text">å®ç°å´©æºƒä¸€è‡´æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E7%90%86%E8%A7%A3-%E2%80%9C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E2%80%9D"><span class="toc-number">2.6.</span> <span class="toc-text">é‡æ–°ç†è§£ â€œæ•°æ®ç»“æ„â€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-Atomic-Append"><span class="toc-number">2.7.</span> <span class="toc-text">å®ç° Atomic Append</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Journaling-%E4%BC%98%E5%8C%96"><span class="toc-number">2.8.</span> <span class="toc-text">Journaling: ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Metadata-Journaling"><span class="toc-number">2.9.</span> <span class="toc-text">Metadata Journaling</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/11/OS/class29/" title="29. æŒä¹…æ•°æ®çš„å¯é æ€§">29. æŒä¹…æ•°æ®çš„å¯é æ€§</a><time datetime="2024-07-10T16:00:00.000Z" title="å‘è¡¨äº 2024-07-11 00:00:00">2024-07-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/10/OS/class28/" title="28. æ–‡ä»¶ç³»ç»Ÿ">28. æ–‡ä»¶ç³»ç»Ÿ</a><time datetime="2024-07-09T16:00:00.000Z" title="å‘è¡¨äº 2024-07-10 00:00:00">2024-07-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/09/OS/class27/" title="27. æ–‡ä»¶å’Œè®¾å¤‡é©±åŠ¨">27. æ–‡ä»¶å’Œè®¾å¤‡é©±åŠ¨</a><time datetime="2024-07-08T16:00:00.000Z" title="å‘è¡¨äº 2024-07-09 00:00:00">2024-07-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/08/OS/class26/" title="26. è¾“å…¥è¾“å‡ºè®¾å¤‡">26. è¾“å…¥è¾“å‡ºè®¾å¤‡</a><time datetime="2024-07-07T16:00:00.000Z" title="å‘è¡¨äº 2024-07-08 00:00:00">2024-07-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/07/03/OS/class25/" title="25.1-Bit çš„å­˜å‚¨">25.1-Bit çš„å­˜å‚¨</a><time datetime="2024-07-02T16:00:00.000Z" title="å‘è¡¨äº 2024-07-03 00:00:00">2024-07-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn-img-el3.pages.dev/cover/footbg.webp')"><div id="footer-wrap"><div class="copyright">&copy;2024 By Asuka</div><div class="footer_custom_text">Per aspera ad astra.<p><a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://unpkg.com/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://unpkg.com/katex@0.16.9/dist/katex.min.css"><script src="https://unpkg.com/katex@0.16.9/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script></div><script src="https://unpkg.com/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>